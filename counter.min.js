"use strict";var counterModule=angular.module("Firestitch.angular-counter",[]);counterModule.controller("counterCtrl",["$scope",function($scope){var counterCtrl=this;counterCtrl.parse=function(n){n=String(n).trim().split(".")[0];var invalidInput={hex:~String(n).indexOf("0x"),falsy:!n&&0!==n,isObj:"object"==typeof n};return invalidInput.hex||invalidInput.falsy||invalidInput.isObj?NaN:Number(n)},counterCtrl.isValidNumString=function(){var vals=[].concat(Array.prototype.slice.call(arguments,0));return vals.reduce(function(c,val){var parsedVal=counterCtrl.parse(val);return c&&!isNaN(parsedVal)},vals.length?!0:!1)},counterCtrl.setValue=function(val,min,max){var parsedVal=counterCtrl.parse(val);return counterCtrl.isValidNumString(val)?void 0!==min&&min>parsedVal?parsedVal=min:void 0!==max&&parsedVal>max?parsedVal=max:parsedVal:parsedVal=min||0}}]),counterModule.directive("fsCounter",["$timeout",function($timeout){return{restrict:"A",scope:{value:"="},controller:"counterCtrl as counterCtrl",template:['<div class="fs-counter input-group" ng-class="addclass" ng-style="width" data-test-id="counter-wrapper">','<span class="input-group-btn" ng-click="minus()" data-test-id="dec-button">','<button class="btn btn-default"><span class="glyphicon glyphicon-minus"></span></button>',"</span>",'<input data-test-id="counter-input" type="text" class="form-control text-center" ng-model="value" ng-blur="blurred()" ng-change="changed()" ng-readonly="readonly">','<span class="input-group-btn" ng-click="plus()" data-test-id="inc-button">','<button class="btn btn-default"><span class="glyphicon glyphicon-plus"></span></button>',"</span>","</div>"].join(""),replace:!0,link:function(scope,element,attrs,counterCtrl){var changeDelay,min=angular.isUndefined(attrs.min)?void 0:counterCtrl.parse(attrs.min),max=angular.isUndefined(attrs.max)?void 0:counterCtrl.parse(attrs.max),step=angular.isUndefined(attrs.step)||0===counterCtrl.parse(attrs.step)?1:counterCtrl.parse(attrs.step);if(angular.isUndefined(scope.value))throw"Missing the value attribute on the counter directive.";scope.readonly=angular.isUndefined(attrs.editable)?!0:!1,scope.addclass=angular.isUndefined(attrs.addclass)?null:attrs.addclass,scope.width=angular.isUndefined(attrs.width)?{}:{width:attrs.width},scope.value=counterCtrl.setValue(scope.value,min,max),scope.minus=function(){scope.value=counterCtrl.setValue(scope.value-step,min,max)},scope.plus=function(){scope.value=counterCtrl.setValue(scope.value+step,min,max)},scope.changed=function(){changeDelay=$timeout(function(){scope.value=counterCtrl.setValue(scope.value,min,max)},1e3,!0)},scope.blurred=function(){scope.value=counterCtrl.setValue(scope.value,min,max)}}}}]);